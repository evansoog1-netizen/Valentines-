<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ’– IMPORTANT QUESTION ðŸ’–</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: black;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
}

.container {
    width: 100%;
    max-width: 420px;
    height: 100vh;
    background: linear-gradient(180deg, #ff5f8a, #ffb3c6);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    text-align: center;
    transition: 0.3s;
}

h1 {
    padding: 20px;
}

.buttons {
    position: relative;
    width: 100%;
    height: 200px;
}

button {
    padding: 12px 26px;
    border-radius: 999px;
    border: none;
    font-size: 18px;
    cursor: pointer;
    position: absolute;
}

#yesBtn {
    background: #ff004c;
    color: white;
    left: 25%;
}

.noBtn {
    background: #333;
    color: white;
    left: 55%;
}

.countdown {
    font-size: 28px;
    display: none;
    margin-top: 20px;
}

.blackout {
    background: black !important;
}

.yay {
    display: none;
    font-size: 32px;
    font-weight: bold;
    animation: pop 0.4s infinite alternate;
}

@keyframes pop {
    to { transform: scale(1.3); }
}
</style>
</head>

<body>
<div class="container" id="container">
    <h1 id="question">Will you be my Valentine? ðŸ’–</h1>

    <div class="buttons" id="buttons">
        <button id="yesBtn">Yes ðŸ’•</button>
        <button class="noBtn">No ðŸ˜¢</button>
    </div>

    <div class="countdown" id="countdown">SELF DESTRUCT IN 5â€¦</div>
    <div class="yay" id="yay">She said YES ðŸ¥¹ðŸ’–
I donâ€™t know how I got this lucky,
but Iâ€™m really glad I did.
Happy Valentineâ€™s Day ðŸ’• ðŸ’–ðŸŽ‰</div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const name = params.get("name") || "bestie";

let attempts = 0;
let countdownStarted = false;

const container = document.getElementById("container");
const buttons = document.getElementById("buttons");
const yesBtn = document.getElementById("yesBtn");
const question = document.getElementById("question");
const countdown = document.getElementById("countdown");
const yay = document.getElementById("yay");

function move(btn) {
    const x = Math.random() * (window.innerWidth - btn.offsetWidth);
    const y = Math.random() * (window.innerHeight - btn.offsetHeight);
    btn.style.position = "fixed";
    btn.style.left = x + "px";
    btn.style.top = y + "px";
}

function cloneNo() {
    const c = document.querySelector(".noBtn").cloneNode(true);
    c.innerText = "ABSOLUTELY NOT ðŸ˜ˆ";
    document.body.appendChild(c);
}

function startCountdown() {
    if (countdownStarted) return;
    countdownStarted = true;
    let t = 5;
    countdown.style.display = "block";
    const timer = setInterval(() => {
        countdown.innerText = `SELF DESTRUCT IN ${t--}â€¦`;
        if (t < 0) {
            clearInterval(timer);
            container.classList.add("blackout");
            setTimeout(() => {
                container.classList.remove("blackout");
                question.innerText = "Okay sorry ðŸ˜­ Will you say YES now?";
                countdown.style.display = "none";
            }, 800);
        }
    }, 800);
}

document.addEventListener("mouseover", e => {
    if (!e.target.classList.contains("noBtn")) return;
    attempts++;

    move(e.target);

    if (attempts === 2) cloneNo();
    if (attempts === 3) question.innerText = `${name}â€¦ this is getting awkward ðŸ˜³`;
    if (attempts === 4) startCountdown();
    if (attempts === 6) question.innerText = "Waitâ€”new question ðŸ˜¶";
    if (attempts === 7) {
        question.innerText = "Will you marry me? ðŸ’ðŸ˜³";
        yesBtn.innerText = "OMG YES ðŸ’â¤ï¸";
    }
});

yesBtn.addEventListener("click", () => {
    yay.style.display = "block";
    buttons.style.display = "none";
    question.style.display = "none";
    countdown.style.display = "none";

    let end = Date.now() + 5000;
    (function frame() {
        confetti({ particleCount: 12, spread: 100, origin: { x: Math.random() } });
        if (Date.now() < end) requestAnimationFrame(frame);
    })();
});
</script>
</body>
</html>
